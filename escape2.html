<!DOCTYPE html>
<head>
    <title>Escape Room!</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet2" href="confetti.css">
</head>
<html>
<body>
    <div class="left-center-block">
        <a id="leftBtn">
            <img style = "width: 70px;" src = "pointLeft.png"></img> 
        </a> 
    </div>
    <div class="right-center-block"> 
        <a id="rightBtn">
            <img style = "width: 70px;" src = "pointRight.png"></img> 
        </a>  
    </div>

    <div class="right-bottom-block"> 
        <a id="inventoryBtn">
            <img style = "width: 90px;" src = "box (1).png"></img> 
        </a>  
    </div>

    <div class="right-top-block"> 
        <a id="helpBtn">
            <img style = "width: 90px;" src = "helpIcon.png"></img> 
        </a>  
    </div>

    <div class="left-bottom-block"> 
        <a id="hintBtn">
            <img style = "width: 90px;" src = "hintIcon.png"></img> 
        </a>  
    </div>


    <div id="inventory" class="popModal">

        <div class="center-block">
          <img id = "key" style = "display: block;width: 100%;" src = "key.png"></img> 
        </div>
      
    </div>

    <div id="help" class="popModal">

        <div class="popModalContent">
          <p>That door is lookin a little sus...</p>
        </div>
      
    </div>

    <div id="hint" class="popModal">

        <div class="popModalContent">
          <p>Hint Goes Here</p>
        </div>
        <div class="mascot"> 
            <img style = "width: 150px;" src = "mascot.png"></img> 
        </div>
      
    </div>

    <div id="Door" class = "DoorButton">
    </div>

    <div id="PC" class = "PCButton">
    </div>

    <div id="Cups" class = "CupsButton">
    </div>

    <div id="CupStack" class = "CupStack">
    </div>

    <div id="Tet" class = "Tet">
    </div>

    <div id = "introduction" class ="popModal" style = "display: none;">
        <div class="left-bottom-npc">
            <a id="npc">
                <img style = "width: 50%;" src = "npc.png"></img> 
            </a> 
        </div>
        <div class="left-center-dialog">
            <a id="dialog">
                <img style = "width: 65%;" src = "dialog.png"></img> 
            </a> 
        </div>
        <div class="left-center-textbox">
            <a id="textbox">
                <p id = "1">
                    Hello! 
                    Welcome to "Escape the Hackathon"! <br>
                    It's the game where you need to pay <br>
                    attention to clues, solve puzzles, <br>
                    and collect items to escape!<br>
                </p>
                    <p style = "display: none" id = "2">
                        Before we begin, here's a short <br>
                        introduction to how you can navigate  <br>
                        the game. First, your inventory is in <br>
                        the bottom right-hand corner. Click it<br>
                        and you will see all the items currently <br>
                        in your inventory. Next, there is a hint <br>
                        for each level so if you get stuck, click <br>
                        it for...well...a hint! <br>
                    </p>
                <p style = "display: none" id = "3">
                    You are now ready to play "Escape <br>
                    the Hackathon." Good Luck! <br>
                </p>
                <button onclick= changeText()> Next </button>
            </a> 
        </div>
    </div>
    
    <div id = "snakeKey" class ="popModal" style = "display: block;">
        <div class="left-bottom-npc">
            <a id="npc">
                <img style = "width: 50%;" src = "npc.png"></img> 
            </a> 
        </div>
        <div class="left-center-dialog">
            <a id="dialog">
                <img style = "width: 65%;" src = "dialog.png"></img> 
            </a> 
        </div>
        <div class="left-center-textbox">
            <a id="textbox">
                <p>
                    Congratulations!!<br>
                    You finished the snake game and got your first key!<br>
                    I wonder where that could go...
                </p>
                <button onclick= changeKeyText()> Next </button>
            </a> 
        </div>
    </div>

    <div id="easterEggBtn"class="box-block"> 
        <a>
            <img style = "width: 30px;" src = "easteregg.png"></img>   
         </a>
    </div>
    
    <div id="easterEgg" class="popModal" style = "display: none">
    
        <div class="modalContentEgg">
          <p style = "font-family: Courier New; font-size:30px; color: white" > Congrats! You found the block! You get confetti </p>
        </div>
      
    </div>

    <script src="confetti.js"></script>
    <!-- Confetti  JS-->
    <script>

        // start

        const start = () => {
            setTimeout(function() {
                confetti.start()
            }, 500); 
        };

        //  Stop

        const stop = () => {
            setTimeout(function() {
                confetti.stop()
            }, 1000);  
        };
    </script>

    <script>
        var cups=0;
        var room = 1;
        var door =1;
        var dooropen=0;
        var left = document.getElementById("leftBtn");
        var right = document.getElementById("rightBtn");
        var inv = document.getElementById("inventoryBtn");
        var help = document.getElementById("helpBtn");
        var hint = document.getElementById("hintBtn");
        var PC = document.getElementById("PC");
        var Door = document.getElementById("Door");
        var Cups = document.getElementById("Cups");
        var Tetris = document.getElementById("Tet");
        var CupStack = document.getElementById("CupStack");
        var invModal = document.getElementById("inventory");
        var helpModal = document.getElementById("help");
        var hintModal = document.getElementById("hint");
        var introModal = document.getElementById("introduction");
        var snakeKeyModal = document.getElementById("snakeKey");
        var key = document.getElementById("key");
        var stat=1;
        var p1 = document.getElementById("1");
        var p2 = document.getElementById("2");
        var p3 = document.getElementById("3");
        var npc= document.getElementById("npc");
        var dialog= document.getElementById("dialog");
        var textbox= document.getElementById("textbox");
        var easterEgg = document.getElementById("easterEggBtn");
        var easterEggModal = document.getElementById("easterEgg");
        
        function changeText(){
            var prev;
            var next;
            switch (stat){
                case 1: 
                    prev =p1;
                    next=p2;
                    stat++;
                    break;

                case 2: 
                    prev =p2;
                    next=p3;
                    stat++;
                    break;
                
                case 3:
                    introModal.style.display = "none";

            }
            prev.style.display="none";
            next.style.display="inline";
        }
        function changeKeyText(){
            snakeKeyModal.style.display = "none";
        }
        function roomChange(){
            switch (room){
                case 1: 
                    document.body.style.backgroundImage = "url('image3.jpeg')";
                    enRoom1();
                    break;

                case 2:
                    document.body.style.backgroundImage = "url('image2.jpeg')";
                    enRoom2();
                    break;

                case 3: 
                    document.body.style.backgroundImage = "url('image1.jpeg')";
                    enRoom3();
                    break;

                case 4:
                    document.body.style.backgroundImage = "url('image0.jpeg')";
                    Tetris.style.display="none";
                    enRoom4();
                    break;

                case 5: 
                    if (cups==0)
                        document.body.style.backgroundImage = "url('IMG_3463.jpeg')";
                    else
                        document.body.style.backgroundImage = "url('IMG_3466.jpeg')";
                    CupStack.style.display="none";
                    Tetris.style.display="block";
                    enRoom5();
                    break;

                case 6:
                    Tetris.style.display="none";
                    if (cups==0){
                        document.body.style.backgroundImage = "url('IMG_3459.jpeg')";
                        CupStack.style.display="block";
                    }
                    else {
                        document.body.style.backgroundImage = "url('IMG_3462.jpeg')";
                        CupStack.style.display="none";
                    }
                    enRoom6();
                    break;
            }
        }
        function enRoom1(){
            PC.style.display = "block";
            right.style.display = "block";
            left.style.display = "none";
            easterEggBtn.style.display = "none";
        }
        function enRoom2(){
            PC.style.display = "none";
            Door.style.display = "none";
            easterEggBtn.style.display = "block";
            right.style.display = "block";
            left.style.display = "block";
        }
        function enRoom3(){
            right.style.display = "none";
            left.style.display = "block";
            if (door==1){
                Door.style.display = "block";
                Door.style.cursor = "pointer";
                easterEggBtn.style.display = "none";
            }
        }
        function enRoom4(){
            Door.style.display = "block";
            Door.style.cursor = "pointer";
            Cups.style.display = "none";
            right.style.display = "none";
            left.style.display = "block";
        }
        function enRoom5(){
            Door.style.display = "none";
            Cups.style.display = "block";
        }
        function enRoom6(){
            Cups.style.display = "none";
        }
        left.onclick = function() {
            if (room>1){
                room--;
                roomChange();
            }
        }
        right.onclick = function() {
            if ((room<3||dooropen==1)&&room<=4){
                room++;
                roomChange();
            }
        }
        inv.onclick = function() {
            invModal.style.display = "block";
        }
        help.onclick = function() {
            helpModal.style.display = "block";
        }
        hint.onclick = function() {
            stat=1;
            p1.style.display = "inline";
            p3.style.display = "none";
            introModal.style.display = "block";
        }
        PC.onclick = function(){
            window.location = "justin.html";
        }
        Door.onclick = function(){
            if (room==3||room==4)
                room++;

            roomChange();
            key.style.display = "none";
            dooropen =1;
        }
        Cups.onclick = function(){
            room++;
            roomChange();
        }
        CupStack.onclick = function(){
            cups=1;
            roomChange();
        }
        Tetris.onclick = function(){
            window.location = "tetris.html";
        }
        window.onclick = function(event) {
            if (event.target == invModal) {
                invModal.style.display = "none";
            }
            if (event.target == helpModal) {
                helpModal.style.display = "none";
            }
            if (event.target == hintModal) {
                hintModal.style.display = "none";
            }
            if (event.target == easterEggModal) {
                easterEggModal.style.display = "none";
                start();
                stop();
            } 
        }
        easterEgg.onclick = function() {
            easterEggModal.style.display = "block";
            start();
        }

    </script>

</body>